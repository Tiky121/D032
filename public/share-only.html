<!DOCTYPE html>
<html lang="sk">
<head>
    <title>Share</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <button class="btn-primary" onclick="share()">ZDIEĽAŤ</button>
    </div>
    <script>
        const socket = io('/');
        const peerConfig = {
            host: '0.peerjs.com', port: 443, secure: true, 
            config: { 'iceServers': [{ urls: 'stun:stun.l.google.com:19302' }]}
        };

        function share() {
            navigator.mediaDevices.getDisplayMedia({video:true}).then(stream => {
                const p = new Peer(peerConfig);
                p.on('open', () => {
                    socket.emit('start-share');
                    socket.emit('get-bigscreen-id');
                    socket.on('bigscreen-id-response', (bsId) => p.call(bsId, stream));
                });
            });
        }
    </script>
</body>
</html>